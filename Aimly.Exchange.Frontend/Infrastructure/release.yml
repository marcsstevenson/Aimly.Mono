resources:
  pipelines:
  - pipeline: AimlyExchangeFrontend
    source: AimlyExchangeFrontendBuild
    trigger:
      branches:
      - dev
      - test
      - prod

# Exclude CI from the repository because we only want to use the resource trigger above
trigger:
  branches:
    exclude:
      - '*'

# We do not want pull requests to trigger the release
pr:
  branches:
    exclude:
      - '*'

variables:
  product-name: 'Customer'
  environment: '$(Build.SourceBranchName)' # Alter this as needed if we want to have multiple environments per branch. eg test-2
  # This is the Azure connection that is specific for the environment. Some tasks to not have subscription Ids :/
  target-resource-group: 'Ludily-$(product-name)-$(environment)' # Where the resources will be deployed
  target-web-app: '$(workspace_name)-$(product-name)-$(environment)' # The name of the application to deploy
  # This is the Azure connection that has access to all environments. Some tasks to have subscription Ids :)
  azure-resource-manager-connection: 'DevEnvironment' # This is the connection for all subscriptions
  shared-key-vault: 'Ludily-Shared-$(environment)'
  workspace_name: 'Aimly'
  workspace_resource_group: 'Ludily-Shared-$(environment)'
  artifact-name: 'artifact_$(environment)'
